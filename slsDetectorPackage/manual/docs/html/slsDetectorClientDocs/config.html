<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>My Project: Configuration commands</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Configuration commands </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Commands to configure the detector. these commands are often left to the configuration file.</p>
<ul>
<li><a class="el" href="config.html#configstructure">Data Structure</a>: commands to configure detector data structure</li>
<li><a class="el" href="config.html#configstatus">Status</a>: commands to configure detector status</li>
<li><a class="el" href="config.html#configsize">Data Size</a>: commands to configure detector data size</li>
<li><a class="el" href="config.html#configflags">Flags</a>: commands to configure detector flags</li>
<li><a class="el" href="config.html#configchip">Chip</a>: commands to configure chip of the detector</li>
<li><a class="el" href="config.html#configversions">Versions</a>: commands to check version of each subsytem</li>
<li><a class="el" href="config.html#configspeed">Speed</a>: commands to configure speed of detector</li>
<li><a class="el" href="config.html#configsettings">Detector Parameters</a>: commands to configure/retrieve configuration of detector</li>
</ul>
<h1><a class="anchor" id="configstructure"></a>
Data Structure</h1>
<p>commands to configure detector data structure</p>
<ul>
<li><b>free</b> Free shared memory on the control PC</li>
<li><b>hostname</b> <code>put</code> frees shared memory and sets the hostname (or IP adress). Only allowed at multi detector level. <code>Returns</code> the list of the hostnames of the multi-detector structure. <code></code>(string)</li>
<li><b>add</b> appends a hostname (or IP address) at the end of the multi-detector structure. Only allowed at multi detector level. Cannot get. <code>Returns</code> the current list of detector hostnames. <code></code>(string)</li>
<li><b>replace</b> <code>Sets</code> the hostname (or IP adress) for a single detector. Only allowed at single detector level. Cannot get. <code>Returns</code> the hostnames for that detector <code></code>(string)</li>
<li><b>user</b> <code>Returns</code> user details from shared memory. Only allowed at multi detector level. Cannot put. <code></code>(string)</li>
<li><b>master i</b> <code>put</code> sets the position of the master of the acquisition (-1 if none). Returns the position of the master of the detector structure (-1 if none).</li>
<li><b>sync</b> Sets/gets the synchronization mode of the detectors in the multi-detector structure. Can be: <code>none</code>, <code>gating</code>, <code>trigger</code>, <code>complementary</code>. Mainly used by MYTHEN/GOTTHARD.</li>
</ul>
<h1><a class="anchor" id="configstatus"></a>
Status</h1>
<p>commands to configure detector status</p>
<ul>
<li><b>online [i]</b> sets the detector in online (1) or offline (0) mode. <code>Returns</code> <code></code>(int)</li>
<li><b>checkonline</b> returns the hostnames of all detectors without connecting to them. <code>Returns</code> (string) "All online" or "[list of offline hostnames] : Not online".</li>
<li><b>activate [b] [p]</b> Activates/Deactivates the detector. <code>b</code> is 1 for activate, 0 for deactivate. Deactivated detector does not send data. <code>p</code> is optional and can be padding (default) or nonpadding for receivers for deactivated detectors. Used for EIGER only. <code>Returns</code> <code></code>(int) (string)</li>
</ul>
<h1><a class="anchor" id="configsize"></a>
Data Size</h1>
<p>commands to configure detector data size</p>
<ul>
<li><b>nmod [i]</b> sets/gets the number of modules of the detector. Used for MYTHEN only. <code>Returns</code> <code></code>(int)</li>
<li><b>maxmod </b> Gets the maximum number of modules of the detector. Used for MYTHEN only. Cannot put! <code>Returns</code> <code></code>(int)</li>
<li><b>dr [i]</b> sets/gets the dynamic range of detector. Mythen [4,8,16,24]. Eiger [4,8,16,32]. Others cannot put! <code>Returns</code> <code></code>(int)</li>
<li><b>roi [i] [xmin] [xmax] [ymin] [ymax] </b> sets region of interest of the detector, where i is number of rois;i=0 to clear rois. Used for GOTTHARD only. <code>Returns</code> <code></code>(int)</li>
<li><b>detsizechan [xmax] [ymax]</b> sets the maximum number of channels in each dimension for complete detector set; -1 is no limit. Use for multi-detector system as first command in config file. <code>Returns</code> <code></code>("int int")</li>
<li><b>roimask [i]</b> ?? <code>Returns</code> <code></code>(int) in hexadecimal</li>
<li><b>flippeddatax [i]</b> enables/disables data being flipped across x axis. 1 enables, 0 disables. Used for EIGER only. 1 for bottom half-module, 0 for top-half module. <code>Returns</code> <code></code>(int)</li>
<li><b>tengiga [i]</b> enables/disables 10GbE in system (detector &amp; receiver). 1 enabled 10GbE, 0 enables 1GbE. Used in EIGER only. <code>Returns</code> <code></code>(int)</li>
<li><b>gappixels [i]</b> enables/disables gap pixels in system (detector &amp; receiver). 1 sets, 0 unsets. Used in EIGER only and only in multi detector level command. <code>Returns</code> <code></code>(int)</li>
</ul>
<h1><a class="anchor" id="configflags"></a>
Flags</h1>
<p>commands to configure detector flags</p>
<ul>
<li><b>flags [flag]</b> sets/gets the readout flags to mode. Options: none, storeinram, tot, continous, parallel, nonparallel, safe, digital, analog_digital, overflow, nooverflow, unknown. Used for MYTHEN and EIGER only. <code>Returns</code> <code></code>(string). put takes one string and <code>returns</code> concatenation of all active flags separated by spaces.</li>
<li><b>extsig:[i] [flag]</b> sets/gets the mode of the external signal i. Options: <code>off</code>, <code>gate_in_active_high</code>, <code>gate_in_active_low</code>, <code>trigger_in_rising_edge</code>, <code>trigger_in_falling_edge</code>, <code>ro_trigger_in_rising_edge</code>, <code>ro_trigger_in_falling_edge</code>, <code>gate_out_active_high</code>, <code>gate_out_active_low</code>, <code>trigger_out_rising_edge</code>, <code>trigger_out_falling_edge</code>, <code>ro_trigger_out_rising_edge</code>, <code>ro_trigger_out_falling_edge</code>. <br/>
 Used in MYTHEN, GOTTHARD, PROPIX only. <code>Returns</code> <code></code>(string)</li>
<li><b>programfpga [file]</b> programs the FPGA with file f (with .pof extension). Used for JUNGFRAU, MOENCH only. Only put! <code>Returns</code> <code></code>("successful", "unsuccessful")</li>
<li><b>resetfpga [f]</b> resets FPGA, where f can be any value. Used for JUNGFRAU only. Only put! <code>Returns</code> <code></code>("successful", "unsuccessful")</li>
</ul>
<h1><a class="anchor" id="configchip"></a>
Chip</h1>
<p>commands to configure chip of the detector</p>
<ul>
<li><b>powerchip [i]</b> Powers on/off the chip. 1 powers on, 0 powers off. Can also get the power status. Used for JUNGFRAU only. <code>Returns</code> <code></code>(int)</li>
<li><b>led [i]</b> sets/gets the led status. 1 on, 0 off. Used for MOENCH only ?? <code>Returns</code> <code></code>(int)</li>
<li><b>auto_comp_disable i </b> Currently not implemented. this mode disables the on-chip gain switching comparator automatically after 93.75% of exposure time (only for longer than 100us). 1 enables mode, 0 disables mode. By default, mode is disabled (comparator is enabled throughout). (JUNGFRAU only). <code>Returns</code> <code></code>(int)</li>
<li><b>pulse [n] [x] [y]</b> pulses pixel at coordinates (x,y) n number of times. Used in EIGER only. Only put! <code>Returns</code> <code></code>("successful", "unsuccessful")</li>
<li><b>pulsenmove [n] [x] [y]</b> pulses pixel n number of times and moves relatively by x value (x axis) and y value(y axis). Used in EIGER only. Only put! <code>Returns</code> <code></code>("successful", "unsuccessful")</li>
<li><b>pulsechip [n]</b>pulses chip n number of times, while n=-1 will reset it to normal mode. Used in EIGER only. Only put! <code>Returns</code> <code></code>("successful", "unsuccessful")</li>
</ul>
<h1><a class="anchor" id="configversions"></a>
Versions</h1>
<p>Commands to check versions of each subsystem</p>
<ul>
<li><b>checkdetversion</b> Checks the version compatibility with detector server (if hostname is in shared memory). Only get! Only for Eiger, Jungfrau &amp; Gotthard. <code>Returns</code> <code></code>("compatible", "incompatible")</li>
<li><b>checkrecversion</b> Checks the version compatibility with receiver server (if rx_hostname is in shared memory). Only get! Only for Eiger, Jungfrau &amp; Gotthard. <code>Returns</code> <code></code>("compatible", "incompatible")</li>
<li><b>moduleversion:[i]</b> Gets the firmware version of module i. Used for MYTHEN only. Only get! <code>Returns</code> <code></code>(long int) in hexadecimal or "undefined module number"</li>
<li><b>detectornumber</b> Gets the serial number or MAC of detector. Only get! <code>Returns</code> <code></code>(long int) in hexadecimal</li>
<li><b>modulenumber:[i]</b> Gets the serial number of module i. Used for MYTHEN only. Only get! <code>Returns</code> <code></code>(long int) in hexadecimal or "undefined module number"</li>
<li><b>detectorversion</b> Gets the firmware version of detector. Only get! <code>Returns</code> <code></code>(long int) in hexadecimal</li>
<li><b>softwareversion</b> Gets the software version of detector server. Only get! <code>Returns</code> <code></code>(long int) in hexadecimal</li>
<li><b>thisversion</b> Gets the software version of this client software. Only get! <code>Returns</code> <code></code>(long int) in hexadecimal</li>
<li><b>receiverversion</b> Gets the software version of receiver. Only get! <code>Returns</code> <code></code>(long int) in hexadecimal</li>
<li><b>framesl</b> gets number of frames left. Used in MYTHEN, GOTTHARD only. Only get! <code>Returns</code> <code></code>(double with 9 decimal digits)</li>
</ul>
<h1><a class="anchor" id="configspeed"></a>
Speed</h1>
<p>commands to configure speed of detector</p>
<ul>
<li><b>clkdivider [i]</b> sets/gets the readout clock divider. EIGER, JUNGFRAU [0(fast speed), 1(half speed), 2(quarter speed)]. Jungfrau, full speed is not implemented and overwrites adcphase to recommended default. MYTHEN[???]. <code>Returns</code> <code></code>(int)</li>
<li><b>setlength [i]</b> sets/gets length of set/reset signals (in clock cycles). Used in MYTHEN only. <code>Returns</code> <code></code>(int)</li>
<li><b>waitstates [i]</b> sets/gets waitstates of the bus interface (in clock cycles). Used in MYTHEN only. <code>Returns</code> <code></code>(int)</li>
<li><b>totdivider [i]</b> sets/gets clock divider in tot mode. Used in MYTHEN only. <code>Returns</code> <code></code>(int)</li>
<li><b>totdutycycle [i]</b> sets/gets duty cycle of the tot clock. Used in MYTHEN only. <code>Returns</code> <code></code>(int)</li>
<li><b>phasestep [i]</b> Only put for gotthard. Moves the phase of the ADC clock.<code>Returns</code> <code></code>(int)</li>
<li><b>oversampling [i]</b> Sets/gets the number of adcsamples per clock. For the new chiptestboard.<code>Returns</code> <code></code>(int)</li>
<li><b>adcclk [i]</b> sets/gets the ADC clock frequency in MHz. For the new chiptestboard!<code>Returns</code> <code></code>(int)</li>
<li><b>adcphase [i]</b> Sets/gets phase of the sampling clock. For JUNGFRAU, setting speed (clkdivider) overwrites adcphase to its default recommended value. (Not for EIGER) <code>Returns</code> <code></code>(int)</li>
<li><b>adcpipeline [i]</b> Sets/gets the pipeline of the ADC. For the new chiptestbaord!<code>Returns</code> <code></code>(int)</li>
<li><b>dbitclk [i]</b> Sets/gets the clock frequency of the latching of the digital bits in MHz. For the new chiptestboard!<code>Returns</code> <code></code>(int)</li>
<li><b>dbitphase [i]</b> Sets/gets the phase of the clock for latching of the digital bits. For the new chiptestboard!?<code>Returns</code> <code></code>(int)</li>
<li><b>dbitpipeline [i]</b> Sets/gets the pipeline of the latching of the digital bits. For the new chiptestbaord!<code>Returns</code> <code></code>(int)</li>
</ul>
<h1><a class="anchor" id="configsettings"></a>
Detector Parameters</h1>
<p>commands to configure/retrieve configuration of detector</p>
<ul>
<li><b>config [fname]</b> sets/saves detector/receiver to configuration contained in fname. Same as executing sls_detector_put for every line. Normally a one time operation. <code>Returns</code> <code></code>(string) fname</li>
<li><b>rx_printconfig</b> prints the receiver configuration. Only get! <code>Returns</code> <code></code>(string)</li>
<li><b>parameters [fname]</b> sets/saves detector parameters contained in fname. Normally once per different measurement. <code>Returns</code> <code></code>(string) fname</li>
<li><b>setup [fname]</b> sets/saves detector complete setup contained in fname (extensions automatically generated), including trimfiles, ff coefficients etc. <code>Returns</code> <code></code>(string) fname </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
